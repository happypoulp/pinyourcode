(function(){var e="router",t="pubsub";define(["session",t,"views/app"],function(t,n,r){log(e,"Dependencies loaded","Build module");var i=Backbone.Router.extend({routes:{"friend/:id":"getFriend",login:"login",add:"add","test-renderer":"testRenderer","*actions":"any"},needReload:function(){return $.cookie("iacv")!=window.IAC_VERSION?!0:!1},reload:function(){document.location.reload()}}),s=function(){var e=new r({el:$("#pages")}),s=new i;window.app=s,n.subscribe("session:status",function(e){e?s.navigate("/",{trigger:!0}):s.navigate("login",{trigger:!0})}),s.on("route:any",function(){e.renderAuthPage("views/home")}),s.on("route:add",function(t){e.renderAuthPage("views/friend/add")}),s.on("route:login",function(){if(t.logged())return s.navigate("/",{trigger:!0});e.renderPage("views/login")}),s.on("route:getFriend",function(t){e.renderAuthPage("views/friend/detail",t)}),s.on("route:testRenderer",function(){e.renderPage("views/test/page")}),Backbone.history.start()};return{initialize:s}})})();